<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>TapDay</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
body {
  margin: 0;
  background: radial-gradient(circle at top, #1a1f3c, #0f1220);
  color: white;
  font-family: Arial, sans-serif;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100vh;
}

h1 { margin-bottom: 12px; }

#tap {
  width: 220px;
  height: 220px;
  border-radius: 50%;
  background: linear-gradient(135deg, #ff9800, #ff5722);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 36px;
  font-weight: bold;
  cursor: pointer;
  user-select: none;
  transition: transform 0.08s ease;
}

#tap:active { transform: scale(0.9); }

.stat {
  margin-top: 6px;
  font-size: 17px;
}

.btn {
  margin-top: 12px;
  padding: 14px 22px;
  border-radius: 12px;
  cursor: pointer;
  user-select: none;
  font-weight: bold;
  text-align: center;
  min-width: 260px;
}

.blue { background:#2196f3; }
.green { background:#4caf50; }
.gold {
  background: linear-gradient(135deg,#ffd700,#ff9800);
  color:#000;
}
</style>
</head>

<body>

<h1>TapDay</h1>

<div id="tap">TAP</div>

<div class="stat" id="score">–ú–æ–Ω–µ—Ç–∏: 0 üí∞</div>
<div class="stat" id="energy">–ï–Ω–µ—Ä–≥—ñ—è: 100 / 100 ‚ö°</div>
<div class="stat" id="power">–°–∏–ª–∞ —Ç–∞–ø—É: 1</div>
<div class="stat" id="income">–î–æ—Ö—ñ–¥: 0 / —Å–µ–∫ üí∞</div>

<div id="upgrade" class="btn blue"></div>
<div id="buyIncome" class="btn green"></div>
<div id="donate" class="btn gold">‚ö° –ö—É–ø–∏—Ç–∏ 1000 –º–æ–Ω–µ—Ç (‚≠ê 50)</div>

<script>
const tg = window.Telegram.WebApp;
tg.ready();
tg.expand();

// ===== STATE =====
let score = +localStorage.getItem("score") || 0;
let power = +localStorage.getItem("power") || 1;
let income = +localStorage.getItem("income") || 0;
let energy = +localStorage.getItem("energy");
const maxEnergy = 100;
if (isNaN(energy)) energy = maxEnergy;

let upgradeCost = +localStorage.getItem("upgradeCost") || 20;
let incomeCost = +localStorage.getItem("incomeCost") || 50;

// ===== ELEMENTS =====
const tapEl = document.getElementById("tap");
const scoreEl = document.getElementById("score");
const energyEl = document.getElementById("energy");
const powerEl = document.getElementById("power");
const incomeEl = document.getElementById("income");
const upgradeEl = document.getElementById("upgrade");
const buyIncomeEl = document.getElementById("buyIncome");
const donateEl = document.getElementById("donate");

// ===== UI =====
function save() {
  localStorage.setItem("score", score);
  localStorage.setItem("power", power);
  localStorage.setItem("income", income);
  localStorage.setItem("energy", energy);
  localStorage.setItem("upgradeCost", upgradeCost);
  localStorage.setItem("incomeCost", incomeCost);
}

function updateUI() {
  scoreEl.textContent = `–ú–æ–Ω–µ—Ç–∏: ${score} üí∞`;
  energyEl.textContent = `–ï–Ω–µ—Ä–≥—ñ—è: ${energy} / ${maxEnergy} ‚ö°`;
  powerEl.textContent = `–°–∏–ª–∞ —Ç–∞–ø—É: ${power}`;
  incomeEl.textContent = `–î–æ—Ö—ñ–¥: ${income} / —Å–µ–∫ üí∞`;

  upgradeEl.textContent = `Upgrade (+1 —Å–∏–ª–∞) ‚Äî ${upgradeCost} üí∞`;
  buyIncomeEl.textContent = `–î–æ—Ö—ñ–¥ (+1 / —Å–µ–∫) ‚Äî ${incomeCost} üí∞`;
}

updateUI();

// ===== TAP =====
tapEl.addEventListener("pointerdown", () => {
  if (energy <= 0) return;
  score += power;
  energy--;
  tg.HapticFeedback.impactOccurred("light");
  save();
  updateUI();
});

// ===== UPGRADE =====
upgradeEl.addEventListener("pointerdown", () => {
  if (score < upgradeCost) return;
  score -= upgradeCost;
  power++;
  upgradeCost = Math.round(upgradeCost * 1.5);
  tg.HapticFeedback.impactOccurred("medium");
  save();
  updateUI();
});

// ===== INCOME =====
buyIncomeEl.addEventListener("pointerdown", () => {
  if (score < incomeCost) return;
  score -= incomeCost;
  income++;
  incomeCost = Math.round(incomeCost * 1.6);
  tg.HapticFeedback.impactOccurred("medium");
  save();
  updateUI();
});

// ===== AUTO INCOME =====
setInterval(() => {
  if (income > 0) {
    score += income;
    save();
    updateUI();
  }
}, 1000);

// ===== ENERGY REGEN =====
setInterval(() => {
  if (energy < maxEnergy) {
    energy++;
    save();
    updateUI();
  }
}, 3000);

// ===== FAKE DONATE =====
donateEl.addEventListener("click", () => {
  tg.showPopup({
    title: "–ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è",
    message: "–ö—É–ø–∏—Ç–∏ 1000 –º–æ–Ω–µ—Ç –∑–∞ ‚≠ê 50?",
    buttons: [
      { id: "buy", type: "default", text: "–ö—É–ø–∏—Ç–∏" },
      { type: "cancel" }
    ]
  }, (btnId) => {
    if (btnId === "buy") {
      score += 1000;
      tg.HapticFeedback.notificationOccurred("success");
      save();
      updateUI();
    }
  });
});
</script>

</body>
</html>
