<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TapDay</title>

<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
body{
  margin:0;
  background:#0e1120;
  color:white;
  font-family:Arial;
  text-align:center;
}
h1{margin-top:20px}
#tap{
  width:240px;height:240px;
  margin:30px auto;
  border-radius:50%;
  background:linear-gradient(135deg,#ff9800,#ff5722);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:40px;
  user-select:none;
}
.btn{
  width:80%;
  padding:16px;
  margin:10px auto;
  border:none;
  border-radius:14px;
  font-size:18px;
  color:white;
}
.green{background:#4caf50}
.blue{background:#2196f3}
</style>
</head>

<body>
<h1>TapDay ðŸ’°</h1>

<div id="tap">TAP</div>
<div id="score">0 ðŸ’°</div>

<button class="btn blue" onclick="upgradeTap()">Upgrade (+1)</button>
<button class="btn green" onclick="donate()">ðŸ’Ž ÐŸÑ–Ð´Ñ‚Ñ€Ð¸Ð¼Ð°Ñ‚Ð¸ Ð³Ñ€Ñƒ</button>

<script>
const tg = window.Telegram.WebApp;
tg.expand();

let coins = Number(localStorage.getItem("coins")) || 0;
let tapPower = 1;
let upgradeCost = 50;

const scoreEl = document.getElementById("score");
scoreEl.textContent = coins + " ðŸ’°";

document.getElementById("tap").onclick = () => {
  coins += tapPower;
  save();
  tg.HapticFeedback?.impactOccurred("light");
};

function upgradeTap(){
  if(coins >= upgradeCost){
    coins -= upgradeCost;
    tapPower++;
    upgradeCost = Math.floor(upgradeCost * 1.6);
    save();
    tg.HapticFeedback?.notificationOccurred("success");
  }
}

function donate(){
  tg.openTelegramLink("https://t.me/Ð¢Ð’Ð†Ð™_Ð‘ÐžÐ¢?start=donate");
}

// ðŸ‘‡ ÐžÐ¦Ð• ÐšÐ›Ð®Ð§ÐžÐ’Ð•
tg.onEvent("message", () => {
  if (tg.initDataUnsafe?.start_param === "paid") {
    coins += 100;
    save();
    alert("ðŸŽ‰ +100 Ð¼Ð¾Ð½ÐµÑ‚ Ð·Ð° Ð¿Ñ–Ð´Ñ‚Ñ€Ð¸Ð¼ÐºÑƒ!");
  }
});

function save(){
  localStorage.setItem("coins", coins);
  scoreEl.textContent = coins + " ðŸ’°";
}
</script>
</body>
</html>
